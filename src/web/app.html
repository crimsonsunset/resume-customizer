<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%sveltekit.assets%/favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    
    <!-- 
      THEME FLASH PREVENTION:
      This inline script runs immediately (blocking) BEFORE any CSS loads.
      
      Why this fixes the flash:
      1. SSR renders HTML with no theme data (server can't access localStorage)
      2. CSS loads with default 'light' theme, causing flash
      3. Later, JS hydration applies saved theme from localStorage
      4. This script eliminates steps 2-3 by setting theme BEFORE CSS processes
      
      Result: No flash, theme applied immediately on page load
    -->
    <script>
      (function() {
        try {
          const savedTheme = localStorage.getItem('daisy-theme') || 'light'
          document.documentElement.dataset.theme = savedTheme
        } catch (e) {
          // Fallback for browsers with localStorage disabled
          document.documentElement.dataset.theme = 'light'
        }
      })()
    </script>
    
    <!-- SEO handled by sk-seo component in layout -->
    
    <!-- Inject head content -->
    %sveltekit.head%
  </head>
  
  <body data-sveltekit-preload-data="hover" class="web-ui">
    <!-- Pre-page-load animated loader -->
    <div id="initial-loader" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: white; z-index: 9999; display: flex; justify-content: center; align-items: center; transition: opacity 0.5s ease-out;">
      <aside class="container-loader">
        <article style="--color: #ff6347; --i: 13px; --d: 6.8s;" class="ball"></article>
        <article style="--color: #00ced1; --i: 19px; --d: 3.5s;" class="ball"></article>
        <article style="--color: #adff2f; --i: 11px; --d: 4.9s;" class="ball"></article>
        <article style="--color: #9370db; --i: 17px; --d: 9.3s;" class="ball"></article>
        <article style="--color: #ff1493; --i: 14px; --d: 2.7s;" class="ball"></article>
        <article style="--color: #00bfff; --i: 10px; --d: 5.1s;" class="ball"></article>
        <article style="--color: #7fff00; --i: 16px; --d: 6.6s;" class="ball"></article>
        <article style="--color: #dc143c; --i: 18px; --d: 7.2s;" class="ball"></article>
        <article style="--color: #8a2be2; --i: 12px; --d: 8.4s;" class="ball"></article>
        <article style="--color: #48d1cc; --i: 20px; --d: 3.9s;" class="ball"></article>
        <article style="--color: #ff4500; --i: 15px; --d: 4.6s;" class="ball"></article>
        <article style="--color: #00ff7f; --i: 19px; --d: 5.7s;" class="ball"></article>
        <article style="--color: #ba55d3; --i: 11px; --d: 7.1s;" class="ball"></article>
        <article style="--color: #1e90ff; --i: 13px; --d: 9.7s;" class="ball"></article>
        <article style="--color: #ffa500; --i: 10px; --d: 6.2s;" class="ball"></article>
        <article style="--color: #ff69b4; --i: 14px; --d: 3.4s;" class="ball"></article>
        <article style="--color: #00fa9a; --i: 17px; --d: 8.9s;" class="ball"></article>
        <article style="--color: #9400d3; --i: 12px; --d: 7.6s;" class="ball"></article>
        <article style="--color: #ffb6c1; --i: 16px; --d: 4.3s;" class="ball"></article>
        <article style="--color: #20b2aa; --i: 18px; --d: 2.8s;" class="ball"></article>
      </aside>
    </div>

    <style>
      /* Inline styles for immediate rendering */
      .container-loader {
        --size: 200px;
        width: var(--size);
        height: var(--size);
        position: relative;
        zoom: 1;
      }

      .container-loader .ball {
        position: absolute;
        width: calc(var(--size) + var(--i));
        height: calc(var(--size) + var(--i));
        background-color: var(--color);
        border-radius: 50%;
        animation: loader-move 5s linear infinite both;
        transform-origin: var(--size);
        mix-blend-mode: difference;
        animation-duration: var(--d);
        filter: blur(28px);
      }

      .container-loader .ball:nth-child(even) {
        animation-direction: reverse;
      }

      @keyframes loader-move {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(359deg);
        }
      }

      /* Hide loader when ready */
      .loader-hidden {
        opacity: 0 !important;
        pointer-events: none;
      }
    </style>

    <script>
      // Remove loader when SvelteKit is ready
      window.addEventListener('DOMContentLoaded', function() {
        // Wait a tiny bit longer to ensure SvelteKit has started
        setTimeout(function() {
          const loader = document.getElementById('initial-loader');
          if (loader) {
            loader.classList.add('loader-hidden');
            // Remove from DOM after fade animation completes
            setTimeout(function() {
              if (loader.parentNode) {
                loader.parentNode.removeChild(loader);
              }
            }, 500); // Match the CSS transition duration
          }
        }, 100); // Small delay to ensure app is mounting
      });

      // Backup removal in case DOMContentLoaded already fired
      if (document.readyState === 'complete') {
        setTimeout(function() {
          const loader = document.getElementById('initial-loader');
          if (loader) {
            loader.classList.add('loader-hidden');
            setTimeout(function() {
              if (loader.parentNode) {
                loader.parentNode.removeChild(loader);
              }
            }, 500);
          }
        }, 100);
      }
    </script>

    <div style="display: contents">%sveltekit.body%</div>
  </body>
</html> 